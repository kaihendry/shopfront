{{ partial "head.html" . }}
{{ $sku := .File.ContentBaseName }}
<header>
<h2>
{{.Title}}
</h2>
<h3>
{{ lang.NumFmt 2 (div (float .Params.Price) 100) }}
{{ $.Site.Params.currency }}
</h3>
</header>
<div id="react"></div>
<script>
	const productData = [
		{
			name: '{{ .Title }}',
{{ if (fileExists (printf "data/price/%s.json" $sku)) }}
			sku: '{{ index (index .Site.Data.price $sku) "id" }}',
{{ end }}
			price: {{ .Params.Price }},
{{ if ( gt ( len (.Resources.ByType "image")) 0 ) }}
{{ range first 1 (.Resources.ByType "image") }}
{{ $image := .Resize "x300" }}
			image: '{{ $image.Permalink }}',
{{ end }}
{{ else }}
			image: '/shop/noproductimage.png',
{{ end }}
			currency: '{{ $.Site.Params.currency }}'
		}
	]
</script>
{{.Content}}
<!--
<p style="color: #6c757d;">SKU: 
{{ $sku }}
</p>
{{ if (fileExists (printf "data/price/%s.json" $sku)) }}
<p>Stripe price ID 
{{ index (index .Site.Data.price $sku) "id" }}
</p>
{{ else }}
<p>ERROR: RUN 'stripe-sync.sh'
</p>
{{ end }}
-->
{{ partial "footer.html" . }}
